{"version":3,"sources":["../../../static/js/OrderHistory.js"],"names":["OrderHistory","selector","exchange_client","htmlObject","$","append","find","height","order_book","orders","order","init","id","product_id","scrollDown","htmlOrder","text","price","side","color","status","removeClass","addClass","attr","p","animate","scrollTop","prop"],"mappings":";;;;;;IAAMA,Y;AACF,0BAAYC,QAAZ,EAAsBC,eAAtB,EAAuC;AAAA;;AACnC,aAAKC,UAAL,GAAkBC,EAAEH,QAAF,CAAlB;AACA,aAAKE,UAAL,CAAgBE,MAAhB,CAAuB,yEAAvB;AACA,aAAKF,UAAL,GAAkB,KAAKA,UAAL,CAAgBG,IAAhB,CAAqB,aAArB,CAAlB;AACA,aAAKH,UAAL,CAAgBI,MAAhB,CAAuBL,gBAAgBM,UAAhB,CAA2BL,UAA3B,CAAsCG,IAAtC,CAA2C,OAA3C,EAAoDC,MAApD,EAAvB;AACA,aAAKE,MAAL,GAAc,EAAd;AACH;;;;+BAEMC,K,EAAOC,I,EAAM;AAChB,gBAAI,EAAED,MAAME,EAAN,IAAY,KAAKH,MAAnB,CAAJ,EAAgC;;AAE5B,qBAAKN,UAAL,CAAgBE,MAAhB,CACI,wCACA,YADA,GACeK,MAAME,EADrB,GAC0B,mBAD1B,GAEA,iBAFA,GAEoBF,MAAME,EAF1B,GAE+B,qBAF/B,GAEuDF,MAAMG,UAF7D,GAE0E,IAF1E,GAGA,qCAHA,GAIA,mCAJA,GAKA,yCALA,GAMA,MAPJ;AAQA,oBAAI,CAACF,IAAL,EAAW;AACP,yBAAKG,UAAL;AACH;AAEJ;AACD,iBAAKL,MAAL,CAAYC,MAAME,EAAlB,IAAwBF,KAAxB;AACA,gBAAIK,YAAY,KAAKZ,UAAL,CAAgBG,IAAhB,CAAqB,YAAYI,MAAME,EAAvC,CAAhB;AACAG,sBAAUT,IAAV,CAAe,cAAf,EAA+BU,IAA/B,CAAoCN,MAAMO,KAA1C;AACAF,sBAAUT,IAAV,CAAe,aAAf,EAA8BU,IAA9B,CAAoCN,MAAMQ,IAAN,IAAc,KAAf,GAAwB,MAAxB,GAAiC,KAApE;AACAH,sBAAUT,IAAV,CAAe,eAAf,EAAgCU,IAAhC,CACKN,MAAM,gBAAN,IAA0BA,MAAM,kBAAN,CAA3B,GAAwD,GAAxD,GAA8DA,MAAM,gBAAN,CADlE;;AAGA,gBAAIS,cAAJ;AACA,oBAAQT,MAAMU,MAAd;AACI,qBAAK,QAAL;AACID,4BAAQ,SAAR;AACA;AACJ,qBAAK,SAAL;AACA,qBAAK,KAAL;AACIA,4BAAQ,MAAR;AACA;AACJ,qBAAK,UAAL;AACIA,4BAAQ,QAAR;AATR;AAWAA,oBAAQ,qBAAqBA,KAA7B;AACAJ,sBAAUM,WAAV,CAAsB,yBAAtB,EACKA,WADL,CACiB,sBADjB,EAEKA,WAFL,CAEiB,wBAFjB,EAGKC,QAHL,CAGcH,KAHd;;AAKAJ,sBAAUQ,IAAV,CAAe,aAAf,EAA8Bb,MAAMU,MAApC;AACH;;;qCAEY;AACT,gBAAII,IAAI,KAAKrB,UAAb;AACAqB,cAAEC,OAAF,CAAU,EAACC,WAAWF,EAAEG,IAAF,CAAO,cAAP,CAAZ,EAAV,EAA+C,GAA/C;AACH","file":"OrderHistory.js","sourcesContent":["class OrderHistory {\n    constructor(selector, exchange_client) {\n        this.htmlObject = $(selector);\n        this.htmlObject.append('<div class=\"list-group\" style=\"margin-bottom: 0; overflow: auto\"></div>');\n        this.htmlObject = this.htmlObject.find('.list-group');\n        this.htmlObject.height(exchange_client.order_book.htmlObject.find('table').height());\n        this.orders = {};\n    }\n\n    update(order, init) {\n        if (!(order.id in this.orders)) {\n\n            this.htmlObject.append(\n                '<a href=\"#\" class=\"list-group-item\"' +\n                'id=\"order_' + order.id + '\" data-status=\"\" ' +\n                'data-order-id=\"' + order.id + '\" data-product-id=\"' + order.product_id + '\">' +\n                '<span class=\"order-side\"></span> - ' +\n                '<span class=\"order-price\"></span>' +\n                '  (<span class=\"order-volume\"></span>) ' +\n                '</a>')\n            if (!init) {\n                this.scrollDown();\n            }\n\n        }\n        this.orders[order.id] = order;\n        let htmlOrder = this.htmlObject.find('#order_' + order.id);\n        htmlOrder.find('.order-price').text(order.price);\n        htmlOrder.find('.order-side').text((order.side == 'ask') ? \"Sell\" : \"Buy\");\n        htmlOrder.find('.order-volume').text(\n            (order['volume_initial'] - order['volume_remaining']) + \"/\" + order[\"volume_initial\"]);\n\n        let color;\n        switch (order.status) {\n            case \"FILLED\":\n                color = \"success\";\n                break;\n            case \"PARTIAL\":\n            case \"NEW\":\n                color = \"info\";\n                break;\n            case \"CANCELED\":\n                color = \"danger\";\n        }\n        color = \"list-group-item-\" + color;\n        htmlOrder.removeClass(\"list-group-item-success\")\n            .removeClass(\"list-group-item-info\")\n            .removeClass(\"list-group-item-danger\")\n            .addClass(color);\n\n        htmlOrder.attr(\"data-status\", order.status);\n    }\n\n    scrollDown() {\n        let p = this.htmlObject;\n        p.animate({scrollTop: p.prop(\"scrollHeight\")}, 400);\n    }\n}\n"]}