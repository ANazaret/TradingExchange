{"version":3,"sources":["../../../static/js/OrderHistory.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","OrderHistory","selector","exchange_client","htmlObject","$","append","find","height","order_book","orders","value","update","order","init","id","product_id","scrollDown","htmlOrder","text","price","side","color","status","removeClass","addClass","attr","p","animate","scrollTop","prop"],"mappings":"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","file":"OrderHistory.js","sourcesContent":["'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar OrderHistory = function () {\n    function OrderHistory(selector, exchange_client) {\n        _classCallCheck(this, OrderHistory);\n\n        this.htmlObject = $(selector);\n        this.htmlObject.append('<div class=\"list-group\" style=\"margin-bottom: 0; overflow: auto\"></div>');\n        this.htmlObject = this.htmlObject.find('.list-group');\n        this.htmlObject.height(exchange_client.order_book.htmlObject.find('table').height());\n        this.orders = {};\n    }\n\n    _createClass(OrderHistory, [{\n        key: 'update',\n        value: function update(order, init) {\n            if (!(order.id in this.orders)) {\n\n                this.htmlObject.append('<a href=\"#\" class=\"list-group-item\"' + 'id=\"order_' + order.id + '\" data-status=\"\" ' + 'data-order-id=\"' + order.id + '\" data-product-id=\"' + order.product_id + '\">' + '<span class=\"order-side\"></span> - ' + '<span class=\"order-price\"></span>' + '  (<span class=\"order-volume\"></span>) ' + '</a>');\n                if (!init) {\n                    this.scrollDown();\n                }\n            }\n            this.orders[order.id] = order;\n            var htmlOrder = this.htmlObject.find('#order_' + order.id);\n            htmlOrder.find('.order-price').text(order.price);\n            htmlOrder.find('.order-side').text(order.side == 'ask' ? \"Sell\" : \"Buy\");\n            htmlOrder.find('.order-volume').text(order['volume_initial'] - order['volume_remaining'] + \"/\" + order[\"volume_initial\"]);\n\n            var color = void 0;\n            switch (order.status) {\n                case \"FILLED\":\n                    color = \"success\";\n                    break;\n                case \"PARTIAL\":\n                case \"NEW\":\n                    color = \"info\";\n                    break;\n                case \"CANCELED\":\n                    color = \"danger\";\n            }\n            color = \"list-group-item-\" + color;\n            htmlOrder.removeClass(\"list-group-item-success\").removeClass(\"list-group-item-info\").removeClass(\"list-group-item-danger\").addClass(color);\n\n            htmlOrder.attr(\"data-status\", order.status);\n        }\n    }, {\n        key: 'scrollDown',\n        value: function scrollDown() {\n            var p = this.htmlObject;\n            p.animate({ scrollTop: p.prop(\"scrollHeight\") }, 400);\n        }\n    }]);\n\n    return OrderHistory;\n}();\n//# sourceMappingURL=OrderHistory.js.map"]}